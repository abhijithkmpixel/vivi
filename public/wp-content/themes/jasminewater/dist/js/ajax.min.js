jQuery.noConflict(),jQuery(document).ready(function(a){function b(b){a("#page").addClass("processing");var c=b.parents(".vivi-quantity"),d=b.parents(".vivi-quantity").find(".qty"),e=d.val(),f=d.attr("id"),g=d.attr("data-product"),h=update_cart_nonce,j=a(".vivi-quantity .qty"),k=a(".dynamic-cart");c.addClass("active"),a.ajax({type:"POST",dataType:"json",url:ajax_url,data:{action:"update_cart_status",cart_item_key:f,cart_item_qty:e,cart_item_id:g,nonce:h},success:function(b){var c="";for(d=0;d<b.cart_items.length;d++)c+=b.cart_items[d].title+" x "+b.cart_items[d].count+"<br>";a("#page").removeClass("processing"),1>b.cart_total_count?(k.find(".count").addClass("hidden").text(b.cart_total_count),c+="rtl"==lang?"\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u064A \u0645\u0646\u062A\u062C\u0627\u062A \u0641\u064A \u0627\u0644\u0633\u0644\u0629.":"Your cart is currently empty."):(k.find(".count").removeClass("hidden").text(b.cart_total_count),c+="rtl"==lang?"<br/> <a href=\""+site_url+"/cart\" class=\"btn btn-simple btn-white\">\u0639\u0631\u0636 \u0627\u0644\u0633\u0644\u0629</a>":"<br/> <a href=\""+site_url+"/cart\" class=\"btn btn-simple btn-white\">View Cart</a>");for(var d=0;d<j.length;d++)1>a(j[d]).val()&&a(j[d]).parents(".vivi-quantity").removeClass("active");var e="";e="rtl"==lang?1<b.cart_total_count?"\u062A\u0645\u062A \u0623\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0644\u0628 \u0625\u0644\u064A \u0627\u0644\u0633\u0644\u0629":"\u062A\u0645\u062A \u0623\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0644\u0628 \u0625\u0644\u064A \u0627\u0644\u0633\u0644\u0629":1<b.cart_total_count?"Products added to cart.":"Product added to cart.";var f="Cart Updated!";"rtl"==lang&&(f="\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0633\u0644\u0629!"),a.toast({heading:1>b.cart_total_count?f:b.cart_total_count+"&nbsp;"+e,text:c,showHideTransition:"fade",allowToastClose:!0,hideAfter:6e3,stack:1,textAlign:"rtl"==lang?"right":"left",position:"rtl"==lang?"bottom-left":"bottom-right",showHideTransition:"slide",icon:1>b.cart_total_count?"info":"success"})}})}function c(b,c){a.ajax({type:"POST",dataType:"json",url:ajax_url,data:{action:"process_otp_login",nonce:otp_auth_nonce,idToken:b,phoneNumber:c,apiKey:firebaseConfig.apiKey},success:function(b){1==b.status?location.reload():a(u).removeClass("hidden").html(b.status)}})}function d(b,c,d){a.ajax({type:"POST",dataType:"json",url:ajax_url,data:{action:"process_otp_register",nonce:otp_auth_nonce,idToken:b,phoneNumber:c,emailAddress:d,apiKey:firebaseConfig.apiKey},success:function(b){1==b.status?location.reload():a(u).removeClass("hidden").html(b.status)}})}function f(b){coderesult.confirm(o.val()).then(function(a){var e=a.user,f=e.ra,g=e.phoneNumber,h=n.val();null!=f&&f!=null&&""!=f&&("login"==b&&c(f,g),"register"==b&&d(f,g,h))}).catch(function(b){a(u).removeClass("hidden").html(b.message),r.attr("disabled",!1)})}function g(b){firebase.auth().signInWithPhoneNumber(m.val(),window.recaptchaVerifier).then(function(c){window.confirmationResult=c,coderesult=c,s.addClass("hidden"),t.removeClass("hidden"),"login"==b&&a(v).removeClass("hidden").html(val_otsr),"register"==b&&a(v).removeClass("hidden").html(val_otsm)}).catch(function(b){a(u).removeClass("hidden").html(b.message),q.attr("disabled",!1)})}function h(b){"login"==b&&a.ajax({type:"POST",dataType:"json",url:ajax_url,data:{action:"check_user_exists",mobile_number:m.val(),nonce:verify_user_nonce},success:function(c){var d=c.status;d?g(b):(a(u).removeClass("hidden").html(val_nuex),q.attr("disabled",!1))}}),"register"==b&&a.ajax({type:"POST",dataType:"json",url:ajax_url,data:{action:"check_user_exists",mobile_number:m.val(),nonce:verify_user_nonce},success:function(c){var d=c.status;d?(a(u).removeClass("hidden").html(val_malr),q.attr("disabled",!1)):g(b)}})}var i=a(".vivi-quantity .qty-selector .plus"),j=a(".vivi-quantity .qty-selector .minus"),k=a(".single_add_to_cart_button"),l=a(".loop_add_to_cart_button");a(document).on("click",".qty",function(c){c.preventDefault();var d=a(this).parents().hasClass("product-loop-item");d&&b(a(this))}),i.click(function(c){c.preventDefault();var d=a(this).parents().hasClass("product-loop-item"),e=a(this).prev().val(),f=parseInt(e)+1;a(this).prev().val(f),d&&b(a(this))}),j.click(function(c){c.preventDefault();var d=a(this).parents().hasClass("product-loop-item"),e=a(this).next().val(),f=parseInt(e)-1;0!=parseInt(e)&&(a(this).next().val(f),d&&b(a(this)))}),k.click(function(c){c.preventDefault(),b(a(this))}),l.click(function(c){c.preventDefault(),a(this).parents(".vivi-quantity").find("input").val(1),b(a(this).parents(".vivi-quantity").find("input"))});var m=a("#mobile_number"),n=a("#email_address"),o=a("#verification_code"),p=a("#recaptcha-container"),q=a("#sendCode"),r=a("#verifyCode"),s=a("#form_mobile"),t=a("#form_verification"),u=a("#OtpError"),v=a("#OtpSuccess");p.length&&function(){window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier("recaptcha-container"),recaptchaVerifier.render()}(),q.click(function(b){a(u).addClass("hidden"),a(v).addClass("hidden"),q.attr("disabled",!0),"login"==this.dataset.otp&&(""==m.val()?(a(u).removeClass("hidden").html(val_perm),q.attr("disabled",!1)):h(this.dataset.otp)),"register"==this.dataset.otp&&(""==m.val()||""==n.val()?(""==m.val()&&(a(u).removeClass("hidden").html(val_mobile),q.attr("disabled",!1)),""==n.val()&&(a(u).removeClass("hidden").html(val_mail),q.attr("disabled",!1))):h(this.dataset.otp)),b.preventDefault()}),r.click(function(b){a(u).addClass("hidden"),a(v).addClass("hidden"),r.attr("disabled",!0),""==o.val()?(a(u).removeClass("hidden").html(val_eotpr),r.attr("disabled",!1)):f(this.dataset.otp),b.preventDefault()})}),jQuery(document).ajaxComplete(function(a,b,c){("?wc-ajax=apply_coupon"===c.url||"/?wc-ajax=apply_coupon"===c.url||"?wc-ajax=remove_coupon"===c.url||"/?wc-ajax=remove_coupon"===c.url||"/vivi/?wc-ajax=apply_coupon"===c.url||"/vivi/?wc-ajax=remove_coupon"===c.url||"ar/?wc-ajax=apply_coupon"===c.url||"/ar/?wc-ajax=apply_coupon"===c.url||"ar/?wc-ajax=remove_coupon"===c.url||"/ar/?wc-ajax=remove_coupon"===c.url||"/ar/vivi/?wc-ajax=apply_coupon"===c.url||"/ar/vivi/?wc-ajax=remove_coupon"===c.url||"en/?wc-ajax=apply_coupon"===c.url||"/en/?wc-ajax=apply_coupon"===c.url||"en/?wc-ajax=remove_coupon"===c.url||"/en/?wc-ajax=remove_coupon"===c.url||"/en/vivi/?wc-ajax=apply_coupon"===c.url||"/en/vivi/?wc-ajax=remove_coupon"===c.url)&&location.reload()});